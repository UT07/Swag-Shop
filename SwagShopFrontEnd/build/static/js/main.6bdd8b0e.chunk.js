(this["webpackJsonpswag-shop-web"]=this["webpackJsonpswag-shop-web"]||[]).push([[0],[,,,,,,,,,,,,,,function(t,e,n){},function(t,e,n){},,function(t,e,n){},function(t,e,n){},function(t,e,n){},function(t,e,n){"use strict";n.r(e);var i=n(0),s=n(3),c=n.n(s),r=n(8),o=n.n(r),a=(n(14),n(1)),d=n(4),u=n(2),h=n(6),l=n(5),b=n.p+"static/media/logo.103b5fa1.svg",j=(n(15),n(16),function t(){Object(a.a)(this,t),this.getProducts=function(){return new Promise((function(t,e){fetch("http://localhost:3004/product").then((function(e){t(e.json())}))}))}}),p=(n(17),"notif_wishlist_changed"),m={},f=null,O=function t(){return Object(a.a)(this,t),this.postNotification=function(t,e){for(var n=m[t],i=0;i<n.length;i++){n[i].callBack(e)}},this.removeObserver=function(t,e){var n=m[e];if(n)for(var i=0;i<n.length;i++)if(t===n[i].observer){n.splice(i,1),m[e]=n;break}},this.addObserver=function(t,e,n){m[t]||(m[t]=[]);var i={observer:e,callBack:n};m[t].push(i)},f||(f=this),f},v=new O,g=null,L=[],x=function t(){return Object(a.a)(this,t),this.itemOnWishList=function(t){for(var e=0;e<L.length;e++)if(L[e]._id===t._id)return!0;return!1},this.addWishListItem=function(t){L.push(t),v.postNotification(p,L)},this.removeWishListItem=function(t){for(var e=0;e<L.length;e++)if(L[e]._id===t._id){L.splice(e,1),v.postNotification(p,L);break}},g||(g=this),g},W=new x,k=new O,N=function(t){Object(h.a)(n,t);var e=Object(l.a)(n);function n(t){var i;return Object(a.a)(this,n),(i=e.call(this,t)).onButtonClicked=function(){i.state.onWishList?W.removeWishListItem(i.props.product):W.addWishListItem(i.props.product)},i.state={onWishList:W.itemOnWishList()},i.onButtonClicked=i.onButtonClicked.bind(Object(u.a)(i)),i.onWishListChanged=i.onWishListChanged.bind(Object(u.a)(i)),i}return Object(d.a)(n,[{key:"componentDidMount",value:function(){k.addObserver(p,this,this.onWishListChanged)}},{key:"componentWillUnmount",value:function(){k.removeObserver(this,p)}},{key:"onWishListChanged",value:function(t){this.setState({onWishList:W.itemOnWishList(this.props.product)})}},{key:"render",value:function(){var t,e=this;return t=this.state.onWishList?"btn btn-danger":"btn btn-primary",Object(i.jsxs)("div",{className:"card product",children:[Object(i.jsx)("img",{className:"card-img-top",src:this.props.product.imgUrl,alt:"Product"}),Object(i.jsxs)("div",{className:"card-block",children:[Object(i.jsx)("h3",{className:"card-title",children:this.props.product.title}),Object(i.jsxs)("p",{className:"card-text",children:["Price: $",this.props.product.price]}),Object(i.jsx)("a",{href:"#",onClick:function(){return e.onButtonClicked()},className:t,children:this.state.onWishList?"Remove from WishList":"Add To Cart"})]})]})}}]),n}(s.Component),C=(n(18),n(19),new x),w=function(t){Object(h.a)(n,t);var e=Object(l.a)(n);function n(t){var i;return Object(a.a)(this,n),(i=e.call(this,t)).removeProduct=function(){C.removeWishListItem(i.props.product)},i.removeProduct=i.removeProduct.bind(Object(u.a)(i)),i}return Object(d.a)(n,[{key:"render",value:function(){var t=this;return Object(i.jsxs)("li",{className:"list-group-item pc-condensed",children:[Object(i.jsx)("a",{className:"btn btn-outline-danger",onClick:function(){return t.removeProduct()},children:"X"}),Object(i.jsxs)("p",{children:[this.props.product.title,"|",Object(i.jsxs)("b",{children:["$",this.props.product.price]})]})]})}}]),n}(s.Component),y=new O,P=function(t){Object(h.a)(n,t);var e=Object(l.a)(n);function n(t){var s;return Object(a.a)(this,n),(s=e.call(this,t)).createWishList=function(){return s.state.wishList.map((function(t){return Object(i.jsx)(w,{product:t},t._id)}))},s.createWishList=s.createWishList.bind(Object(u.a)(s)),s.onWishListChanged=s.onWishListChanged.bind(Object(u.a)(s)),s.state={wishList:[]},s}return Object(d.a)(n,[{key:"componentDidMount",value:function(){y.addObserver(p,this,this.onWishListChanged)}},{key:"componentWillUnmount",value:function(){y.removeObserver(this,p)}},{key:"onWishListChanged",value:function(t){this.setState({wishList:t})}},{key:"render",value:function(){return Object(i.jsx)("div",{className:"card",children:Object(i.jsxs)("div",{className:"card-block",children:[Object(i.jsx)("h3",{className:"card-title",children:"Wish List"}),Object(i.jsx)("ul",{className:"list-group",children:this.createWishList()})]})})}}]),n}(s.Component),_=new j,B=function(t){Object(h.a)(n,t);var e=Object(l.a)(n);function n(t){var s;return Object(a.a)(this,n),(s=e.call(this,t)).loadData=function(){var t=Object(u.a)(s);_.getProducts().then((function(e){t.setState({products:e})}),(function(t){}))},s.productList=function(){return s.state.products.map((function(t){return Object(i.jsx)("div",{className:"col-sm-4",class:"img-fluid-align",children:Object(i.jsx)(N,{product:t})},t._id)}))},s.state={products:[]},s.loadData=s.loadData.bind(Object(u.a)(s)),s.productList=s.productList.bind(Object(u.a)(s)),s.loadData(),s}return Object(d.a)(n,[{key:"render",value:function(){return Object(i.jsxs)("div",{className:"App",children:[Object(i.jsxs)("header",{className:"App-header",children:[Object(i.jsx)("img",{src:b,className:"App-logo",alt:"logo"}),Object(i.jsx)("h1",{className:"App-link",href:"https://reactjs.org",target:"_blank",rel:"noopener noreferrer",children:" Welcome to Swag Shop "})]}),Object(i.jsx)("div",{className:"App-main",children:Object(i.jsx)("div",{className:"container-fluid App-main",children:Object(i.jsxs)("div",{className:"row",children:[Object(i.jsx)("div",{className:"col-sm-8",children:Object(i.jsx)("div",{className:"row",children:this.productList()})}),Object(i.jsx)("div",{className:"col-sm-4",children:Object(i.jsx)(P,{})})]})})})]})}}]),n}(s.Component),A=function(t){t&&t instanceof Function&&n.e(3).then(n.bind(null,21)).then((function(e){var n=e.getCLS,i=e.getFID,s=e.getFCP,c=e.getLCP,r=e.getTTFB;n(t),i(t),s(t),c(t),r(t)}))};o.a.render(Object(i.jsx)(c.a.StrictMode,{children:Object(i.jsx)(B,{})}),document.getElementById("root")),A()}],[[20,1,2]]]);
//# sourceMappingURL=main.6bdd8b0e.chunk.js.map